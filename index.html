<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Langner by romankierzkowski</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Langner</h1>
        <p>Programing Language for Expressing Strategies</p>

        <p class="view"><a href="https://github.com/romankierzkowski/langner">View the Project on GitHub <small>romankierzkowski/langner</small></a></p>


        <ul>
          <li><a href="https://github.com/romankierzkowski/langner/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/romankierzkowski/langner/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/romankierzkowski/langner">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="langner" class="anchor" href="#langner"><span class="octicon octicon-link"></span></a>Langner</h1>

<p><strong>Disclaimer:</strong> Langner is in <strong>very alpha</strong>. The criticism, ideas and forbearance are <strong>highly appreciated</strong>. If you have any question or remark feel free to share it on the <a href="https://groups.google.com/forum/#!forum/langner">Langner forum</a>.</p>

<h2>
<a name="what-is-langer" class="anchor" href="#what-is-langer"><span class="octicon octicon-link"></span></a>What is Langer?</h2>

<p>Langer is an <strong>object oriented, rule based programming language</strong>. Its interpreter is shipped as an <strong>Python library</strong>.  It was created to express behavior strategies. It has simple syntax based on languages like Python and C. It was designed to be convenient and readable for a programmer, but it can be easily used in <a href="http://en.wikipedia.org/wiki/Genetic_programming">genetic programming</a> as well.  </p>

<p>Langner was created as research language. It is <strong>not general purpose</strong>, but it is general enough that it might be useful in other areas as well. It is available under <a href="http://opensource.org/licenses/MIT">MIT license</a>.</p>

<h2>
<a name="where-can-i-get-it" class="anchor" href="#where-can-i-get-it"><span class="octicon octicon-link"></span></a>Where can I get it?</h2>

<p>The easiest option is via Python package manager:</p>

<div class="highlight highlight-bash"><pre> <span class="nv">$ </span>pip install langner
</pre></div>

<h2>
<a name="getting-started-guide" class="anchor" href="#getting-started-guide"><span class="octicon octicon-link"></span></a>Getting Started Guide</h2>

<h3>
<a name="hello-world-in-langer" class="anchor" href="#hello-world-in-langer"><span class="octicon octicon-link"></span></a>'Hello world' in Langer?</h3>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (True) -&gt; (print("Hello world!"));</span>
<span class="s">'''</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
<span class="n">strat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

<p>The ouput:</p>

<pre><code>Hello world!
Hello world!
Hello world!
...
</code></pre>

<p>Langner parser is available as a <code>build()</code> function in <code>langner</code> module. It takes code in a string. The <strong>white space characters are omitted</strong> when the input is parsed. Any formatting should be accepted. The functions returns the langner.ast.Strategy object. The Strategy extends <code>threading.Thread</code> class. It can be run by executing <code>start()</code> method, but in most of the examples we prefer just to execute <code>run()</code> method in the main thread. The program blocks until it is interrupted (CTRL+C). If there is no change in the code, the following examples will present only the <code>input</code> variable.</p>

<p>The Langner code is <strong>list of rules separated with semicolons</strong>. Each rule has two sections - <strong>conditions and actions</strong>. The rule has the following syntax:</p>

<pre><code>(cond1, cond2, ..., condN) -&gt; (action1, action2, ..., actionN);
</code></pre>

<p>The Langer <strong>strategy is evaluated in an infinite loop</strong>. If the conditions are true, the actions are executed. In the given example the condition is always true and the action executes embedded function <code>print()</code> that prints to the standard output. The strategy will greet the world for the infinity.</p>

<h3>
<a name="global-object-space" class="anchor" href="#global-object-space"><span class="octicon octicon-link"></span></a>Global Object Space</h3>

<p>The key concept behind the Langner is the <strong>Global Object Space (GOS)</strong>. The rules are evaluate against objects in GOS.</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (x) -&gt; (print(x.msg));</span>
<span class="s">'''</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"msg"</span><span class="p">:</span><span class="s">"Hello"</span><span class="p">})</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"msg"</span><span class="p">:</span><span class="s">"World!"</span><span class="p">})</span>

<span class="n">strat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

<p>The output:</p>

<pre><code>Hello
World!
Hello
World!
...
</code></pre>

<p>One was of getting objects to GOS is by adding them with <code>add_to_gos()</code> method. This method takes dictionaries that maps a field name to a field value.</p>

<p>When the variable appears in a condition you may read it as an <strong>universal quantification</strong>. In the given example we would read the rule as: </p>

<p><em>For each object x in GOS, print x.msg to the console.</em> </p>

<p>Then each object in GOS is substituted under x. The variable condition is always true for each object in a GOS. Let's consider more complicated example:</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (x.ok) -&gt; (print(x.msg));</span>
<span class="s">'''</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>

<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"ok"</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s">"msg"</span><span class="p">:</span><span class="s">"Hello"</span><span class="p">})</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"ok"</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span> <span class="s">"msg"</span><span class="p">:</span><span class="s">"Goodbye"</span><span class="p">})</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"ok"</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s">"msg"</span><span class="p">:</span><span class="s">"World!"</span><span class="p">})</span>

<span class="n">strat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

<p>The following code will generate exactly the same output as previous example. The "Goodbye" message will not be printed. The rule can be read:</p>

<p><em>For each object x in GOS that x.ok is true, print x.msg to the console.</em></p>

<p>Although, the real world might be bit more complex than the next example let's face the truth about dating: </p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (x.sex=="f", y.sex=="m", x.score == y.score) -&gt; (print(x.name + " dates " + y.name));</span>
<span class="s">'''</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>

<span class="c"># Girls:</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"name"</span><span class="p">:</span><span class="s">"Kate"</span><span class="p">,</span> <span class="s">"sex"</span><span class="p">:</span><span class="s">"f"</span><span class="p">,</span> <span class="s">"score"</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"name"</span><span class="p">:</span><span class="s">"Meg"</span><span class="p">,</span> <span class="s">"sex"</span><span class="p">:</span><span class="s">"f"</span><span class="p">,</span> <span class="s">"score"</span><span class="p">:</span><span class="mi">7</span><span class="p">})</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"name"</span><span class="p">:</span><span class="s">"Sandy"</span><span class="p">,</span> <span class="s">"sex"</span><span class="p">:</span><span class="s">"f"</span><span class="p">,</span> <span class="s">"score"</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span>

<span class="c"># Boys:</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"name"</span><span class="p">:</span><span class="s">"John"</span><span class="p">,</span> <span class="s">"sex"</span><span class="p">:</span><span class="s">"m"</span><span class="p">,</span> <span class="s">"score"</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"name"</span><span class="p">:</span><span class="s">"Ben"</span><span class="p">,</span> <span class="s">"sex"</span><span class="p">:</span><span class="s">"m"</span><span class="p">,</span> <span class="s">"score"</span><span class="p">:</span><span class="mi">7</span><span class="p">})</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"name"</span><span class="p">:</span><span class="s">"Alex"</span><span class="p">,</span> <span class="s">"sex"</span><span class="p">:</span><span class="s">"m"</span><span class="p">,</span> <span class="s">"score"</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span>

<span class="n">strat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

</pre></div>

<p>The output:</p>

<pre><code>Kate dates John
Meg dates Ben
Sandy dates Alex
Kate dates John
Meg dates Ben
Sandy dates Alex
...
</code></pre>

<p>The following rule contains two variables. <strong>The actions are executed only if, each condition in the rule is fulfilled.</strong> In the given example the rule might be read:</p>

<p><em>For each object x and for each object y, that x is a female and y is a male and x and y have the same score, print the couple names to the console.</em></p>

<h3>
<a name="creating-and-removing-objects-from-gos" class="anchor" href="#creating-and-removing-objects-from-gos"><span class="octicon octicon-link"></span></a>Creating and Removing Objects from GOS</h3>

<p>The object can be added to GOS with <code>new &lt;variable&gt;</code> action and removed from GOS with <code>delete &lt;variable&gt;</code> action. After the object is created, it can be access via variable name in the subsequent actions.  </p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (x) -&gt; (print(x.value));</span>
<span class="s">    (a.value &gt; 0) -&gt; (a.value = a.value - 1);</span>
<span class="s">    (a.value == 0) -&gt; (new b, b.value = 3, delete a);</span>
<span class="s">'''</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({</span><span class="s">"value"</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>

<span class="n">strat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

<p>The output:</p>

<pre><code>3
2
1
0
3
2
1
0
...
</code></pre>

<p>Every evaluation cycle the <code>value</code> field in the object is decreased by one. When the field is equal 0 then the object is removed form GOS and the new object is created and initialized with a <code>value</code> equal 3. In the example, there is always one object in the GOS.</p>

<h3>
<a name="undefined-fields" class="anchor" href="#undefined-fields"><span class="octicon octicon-link"></span></a>Undefined fields</h3>

<p>Langner object is bit different then objects in Python. First, it <strong>does not have the methods</strong>. Second, <strong>the field can be either number, string, boolean or other object</strong>. There is <strong>no null value</strong> in Langer. The field either have value or is undefined. If not existing field is access <code>undef</code> is returned. You can assign <code>undef</code> to a field. It means that you remove this field and it does not exist any longer. The <code>undef</code> has one more interesting property:  </p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (x) -&gt; (print(x.foo + " " + x.foo.bar));</span>
<span class="s">'''</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
<span class="n">strat</span><span class="o">.</span><span class="n">add_to_gos</span><span class="p">({})</span>
<span class="n">strat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

<p>The output:</p>

<pre><code>undef undef
undef undef
undef undef
...
</code></pre>

<p>If an undefined field is accessed as an object it returns <code>undef</code> as well.</p>

<h3>
<a name="functions" class="anchor" href="#functions"><span class="octicon octicon-link"></span></a>Functions</h3>

<p>You can <strong>execute almost any function from Python in the context of Langner</strong> providing you have passed it in the <code>build</code> function in <code>functions</code> parameter. You can <strong>use functions both in actions and conditions</strong>.  In the given example the standard <code>random</code> function is used:</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (True) -&gt; (print(random()));</span>
<span class="s">'''</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">functions</span><span class="o">=</span><span class="p">[</span><span class="n">random</span><span class="p">])</span>
<span class="n">strat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

<p>The output:</p>

<pre><code>0.653709135292
0.475016218464
0.394916852958
0.132886618414
...
</code></pre>

<h3>
<a name="events" class="anchor" href="#events"><span class="octicon octicon-link"></span></a>Events</h3>

<p>The events in Langer is a mechanism of an input. It is a way that external world can communicate with a strategy. Event is a kind of condition. This <strong>condition is fulfilled when an event has been triggered</strong>. The parameters of an event are available for other conditions and actions of the rule. To differentiate event from a function call, event name is preceded with <strong># symbol</strong>. To trigger an event, you have to execute method of a strategy, with a parameters you want to pass.</p>

<p><em>Note:</em> There should be <em>only one event per rule</em>*!</p>

<p>Let's consider <a href="http://youtu.be/EtoMN_xi-AM">real life example</a>:</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (True) -&gt; (print("na na"));</span>
<span class="s">    (#show_message(msg)) -&gt; (print(msg));</span>
<span class="s">'''</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>

<span class="n">strat</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">strat</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> <span class="c"># It starts strategy as a separate thread.</span>

<span class="k">while</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">strat</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span><span class="s">"Batman!"</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>

<p>The output:</p>

<pre><code>na na
na na
na na
na na
na na
na na
na na
na na
na na
Batman!
na na
na na
na na
...
</code></pre>

<p>In this example the strategy is started as a daemon. Once every 0.01 second event <code>#show_message()</code> is triggered. It passes "Batman!" message to the context of a rule.</p>

<h3>
<a name="operators" class="anchor" href="#operators"><span class="octicon octicon-link"></span></a>Operators</h3>

<p>Langner use following operators (the precedence is exactly the same as in Python):</p>

<table>
<tr>
<td>||</td>
<td>Or</td>
  </tr>
<tr>
<td>&amp;&amp;</td>
<td>And</td>
  </tr>
<tr>
<td>!</td>
<td>Logical Negation</td>
  </tr>
<tr>
<td>==, &lt;=, &gt;=, &lt;, &gt;</td>
<td>Comparison</td>
  </tr>
<tr>
<td>|</td>
<td>Bitwise Or</td>
  </tr>
<tr>
<td>^</td>
<td>Bitwise Xor</td>
  </tr>
<tr>
<td>&amp;</td>
<td>Bitwise And</td>
  </tr>
<tr>
<td>&lt;&lt;</td>
<td>Shift Left</td>
  </tr>
<tr>
<td>&gt;&gt;</td>
<td>Shift Right</td>
  </tr>
<tr>
<td>+, -</td>
<td>Addition and Subtraction</td>
  </tr>
<tr>
<td>*, /, %, //</td>
<td>Multiplication, Division, Modulo, Floor Division</td>
  </tr>
<tr>
<td>-, ~</td>
<td>Arithmetic Negation, Bitwise Inversion</td>
  </tr>
<tr>
<td>**</td>
<td>Power</td>
  </tr>
</table><h3>
<a name="execution-order" class="anchor" href="#execution-order"><span class="octicon octicon-link"></span></a>Execution Order</h3>

<p>The strategy is <strong>evaluated in the cycles</strong>. Each cycle the rules are evaluated against object from current state of the GOS. The rules are evaluated in the order of definition. The same refers to the conditions in the rule. Each cycle brings GOS from one state to another. <strong>The actions from one cycle cannot affect conditions from the same cycle.</strong> If all of the rule condition are fulfilled the rule actions are scheduled to execution. <strong>The actions are executed after all rules has been evaluated.</strong></p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">langner</span> <span class="kn">import</span> <span class="n">build</span>

<span class="nb">input</span> <span class="o">=</span> <span class="s">'''</span>
<span class="s">    (o("A"), o("B")) -&gt; (o("C"), o("D"));</span>
<span class="s">    (o("F"), o("G")) -&gt; (o("G"), o("H"));</span>
<span class="s">    (True)-&gt;(print("-----------------"));</span>
<span class="s">'''</span>

<span class="k">def</span> <span class="nf">o</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">v</span>
    <span class="k">return</span> <span class="bp">True</span>

<span class="n">strat</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">functions</span><span class="o">=</span><span class="p">[</span><span class="n">o</span><span class="p">])</span>
<span class="n">strat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

<p>The output:</p>

<pre><code>A
B
F
G
C
D
G
H
-----------------
A
B
...
</code></pre>

<p>To separate output from the different cycles we have added the rule:</p>

<pre><code>(True)-&gt;(print("-----------------"));
</code></pre>

<p>The function <code>o()</code> prints message to the output and return <code>True</code>. That is why it can be used as condition and an action. The conditions are executed first: A B F G then there are executed actions: C D G H.</p>

<h2>
<a name="why-a-new-language" class="anchor" href="#why-a-new-language"><span class="octicon octicon-link"></span></a>Why a new language?</h2>

<p>For my research I needed a language that:</p>

<ol>
<li>allows expressing behavior strategy in a simple rule based fashion,</li>
<li>the strategy would be able to react to events from the environment,</li>
<li>the language should have a syntax that can be used in <a href="http://en.wikipedia.org/wiki/Genetic_programming">genetic programming (GP)</a>.</li>
</ol><p>The procedural programming languages could match two first goals, but their syntax is too complicated for GP. There are well developed rule based languages, for example Prolog. They are intended to work in question and answer mode rather than continuous flow that changes its directions on the events.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/romankierzkowski">romankierzkowski</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-44274809-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>